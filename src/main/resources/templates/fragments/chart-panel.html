<section class="chart-panel" th:fragment="chartPanel">
    <div class="chart-header">
        <h2>Network Latency &amp; Block Propagation</h2>
        <div class="chart-controls">
            <label id="toggleBoundsLabel" class="chart-control-label" th:if="${view.hasAggregatedLatencies || view.hasAggregatedDelays}">
                <input type="checkbox" id="toggleBounds" />
                <span>P5–P99 band</span>
                <span class="hint" data-hint="Show the P5 (5th percentile) and P99 (99th percentile) confidence bounds for each metric. The band indicates the range where 90% of observations fall, helping identify outliers and variability.">?</span>
            </label>
<label id="referenceToggleLabel" class="chart-control-label" th:if="${referenceNodeKey != null && !view.referenceNode}">
                <input type="checkbox" id="toggleReferenceLines" />
                <span>Reference Node</span>
            </label>
        </div>
    </div>
    <div class="chart-wrapper" id="latencyChartWrapper" th:attr="data-range=${range.key},data-end=${endEpochMs}">
        <canvas id="latencyChart" height="120"></canvas>
        <button type="button" class="chart-nav chart-nav-left" id="chartNavLeft" aria-label="Previous range">
            <span aria-hidden="true">←</span>
        </button>
        <button type="button" class="chart-nav chart-nav-right" id="chartNavRight" aria-label="Next range">
            <span aria-hidden="true">→</span>
        </button>
    </div>
</section>
